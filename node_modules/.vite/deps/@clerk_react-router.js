import {
  useLocation,
  useNavigate,
  useParams
} from "./chunk-SF3ZTR2D.js";
import {
  APIKeys,
  AuthenticateWithRedirectCallback,
  ClerkDegraded,
  ClerkFailed,
  ClerkLoaded,
  ClerkLoading,
  ClerkProvider,
  CreateOrganization,
  GoogleOneTap,
  OrganizationList,
  OrganizationProfile,
  OrganizationSwitcher,
  PaymentElement,
  PaymentElementProvider,
  PricingTable,
  Protect,
  RedirectToCreateOrganization,
  RedirectToOrganizationProfile,
  RedirectToSignIn,
  RedirectToSignUp,
  RedirectToTasks,
  RedirectToUserProfile,
  SignIn,
  SignInButton,
  SignInWithMetamaskButton,
  SignOutButton,
  SignUp,
  SignUpButton,
  SignedIn,
  SignedOut,
  TaskChooseOrganization,
  TaskResetPassword,
  UserAvatar,
  UserButton,
  UserProfile,
  Waitlist,
  __experimental_CheckoutProvider,
  errorThrower,
  incompatibleRoutingWithPathProvidedError,
  noPathProvidedError,
  setErrorThrowerOptions,
  useAuth,
  useCheckout,
  useClerk,
  useEmailLink,
  useOrganization,
  useOrganizationList,
  usePaymentElement,
  useReverification,
  useSession,
  useSessionList,
  useSignIn,
  useSignUp,
  useUser
} from "./chunk-YWOGKQBI.js";
import "./chunk-AWNCFKJZ.js";
import {
  require_react
} from "./chunk-BQYK6RGN.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/@clerk/react-router/dist/client/ReactRouterClerkProvider.js
var import_react3 = __toESM(require_react(), 1);

// node_modules/@clerk/react-router/dist/utils/errors.js
var createErrorMessage = (msg) => {
  return `ðŸ”’ Clerk: ${msg.trim()}

For more info, check out the docs: https://clerk.com/docs,
or come say hi in our discord server: https://clerk.com/discord
`;
};
var ssrExample = `Use 'rootAuthLoader' as your root loader. Then, add <ClerkProvider> to your app.
Example:

import { rootAuthLoader } from '@clerk/react-router/ssr.server'
import { ClerkProvider } from '@clerk/react-router'

export async function loader(args: Route.LoaderArgs) {
  return rootAuthLoader(args)
}

export default function App({ loaderData }: Route.ComponentProps) {
  return (
    <ClerkProvider loaderData={loaderData}>
      <Outlet />
    </ClerkProvider>
  )
}
`;
var invalidClerkStatePropError = createErrorMessage(`
You're trying to pass an invalid object in "<ClerkProvider clerkState={...}>".

${ssrExample}
`);
var noClerkStateError = createErrorMessage(`
Looks like you didn't pass 'clerkState' to "<ClerkProvider clerkState={...}>".

${ssrExample}
`);
var noLoaderArgsPassedInGetAuth = createErrorMessage(`
You're calling 'getAuth()' from a loader, without providing the loader args object.
Example:

export async function loader(args: Route.LoaderArgs) {
  const { userId } = await getAuth(args)

  // Your code here
}
`);
var invalidRootLoaderCallbackReturn = createErrorMessage(`
You're returning an invalid response from the 'rootAuthLoader' inside root.tsx.
You can only return plain objects, Responses created using the React Router 'data()'helper or
custom redirect 'Response' instances (status codes in the range of 300 to 400).
If you want to return a primitive value or an array, you can always wrap the response with an object.

Example:

export async function loader(args: Route.LoaderArgs) {
  return rootAuthLoader(args, async ({ auth }) => {
    const { userId } = auth;
    const posts = await database.getPostsByUserId(userId);

    return { data: posts }
    // Or
    return data(posts, {
      headers: {
        'Content-Type': 'application/json'
      }
    })
  })
}
`);
var noSecretKeyError = createErrorMessage(`
A secretKey must be provided in order to use SSR and the exports from @clerk/react-router/api.');
If your runtime supports environment variables, you can add a CLERK_SECRET_KEY variable to your config.
Otherwise, you can pass a secretKey parameter to rootAuthLoader or getAuth.
`);
var satelliteAndMissingProxyUrlAndDomain = createErrorMessage(
  `Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl`
);
var satelliteAndMissingSignInUrl = createErrorMessage(`
Invalid signInUrl. A satellite application requires a signInUrl for development instances.
Check if signInUrl is missing from your configuration or if it is not an absolute URL.`);
var publishableKeyMissingErrorInSpaMode = createErrorMessage(`
You're trying to use Clerk in React Router SPA Mode without providing a Publishable Key.
Please provide the publishableKey prop on the <ClerkProvider> component.

Example:

<ClerkProvider publishableKey={PUBLISHABLE_KEY}>
`);
var middlewareMigrationExample = `To use the new middleware system, you need to:

1. Enable the 'v8_middleware' future flag in your config:

// react-router.config.ts
export default {
  future: {
    v8_middleware: true,
  },
} satisfies Config;

2. Install the clerkMiddleware:

import { clerkMiddleware, rootAuthLoader } from '@clerk/react-router/server'
import { ClerkProvider } from '@clerk/react-router'

export const middleware: Route.MiddlewareFunction[] = [clerkMiddleware()]

export const loader = (args: Route.LoaderArgs) => rootAuthLoader(args)

export default function App({ loaderData }: Route.ComponentProps) {
  return (
    <ClerkProvider loaderData={loaderData}>
      <Outlet />
    </ClerkProvider>
  )
}
`;
var middlewareMigrationWarning = createErrorMessage(`
'"clerkMiddleware()" not detected.

${middlewareMigrationExample}
`);

// node_modules/@clerk/react-router/dist/utils/assert.js
function warnForSsr(val) {
  if (!val || !val.__internal_clerk_state) {
    console.warn(noClerkStateError);
  }
}
function assertValidClerkState(val) {
  if (!val) {
    throw new Error(noClerkStateError);
  }
  if (!!val && !val.__internal_clerk_state) {
    throw new Error(invalidClerkStatePropError);
  }
}
function assertPublishableKeyInSpaMode(key) {
  if (!key || typeof key !== "string") {
    throw new Error(publishableKeyMissingErrorInSpaMode);
  }
}
var isSpaMode = () => {
  var _a;
  if (typeof window !== "undefined" && typeof ((_a = window.__reactRouterContext) == null ? void 0 : _a.isSpaMode) !== "undefined") {
    return window.__reactRouterContext.isSpaMode;
  }
  return void 0;
};

// node_modules/@clerk/react-router/dist/client/ReactRouterOptionsContext.js
var import_react = __toESM(require_react(), 1);
var ClerkReactRouterOptionsCtx = import_react.default.createContext(void 0);
ClerkReactRouterOptionsCtx.displayName = "ClerkReactRouterOptionsCtx";
var ClerkReactRouterOptionsProvider = (props) => {
  const { children, options } = props;
  return import_react.default.createElement(ClerkReactRouterOptionsCtx.Provider, { value: { value: options } }, children);
};

// node_modules/@clerk/react-router/dist/client/useAwaitableNavigate.js
var import_react2 = __toESM(require_react(), 1);
var useAwaitableNavigate = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const resolveFunctionsRef = import_react2.default.useRef([]);
  const resolveAll = () => {
    resolveFunctionsRef.current.forEach((resolve) => resolve());
    resolveFunctionsRef.current.splice(0, resolveFunctionsRef.current.length);
  };
  import_react2.default.useEffect(() => {
    resolveAll();
  }, [location]);
  return (to, opts) => {
    return new Promise((res) => {
      resolveFunctionsRef.current.push(res);
      void navigate(to, opts);
    });
  };
};

// node_modules/@clerk/react-router/dist/client/ReactRouterClerkProvider.js
var SDK_METADATA = {
  name: "@clerk/react-router",
  version: "2.3.2"
};
var awaitableNavigateRef = { current: void 0 };
function ClerkProviderBase({ children, ...rest }) {
  const awaitableNavigate = useAwaitableNavigate();
  const isSpaMode2 = isSpaMode();
  import_react3.default.useEffect(() => {
    awaitableNavigateRef.current = awaitableNavigate;
  }, [awaitableNavigate]);
  const { clerkState, ...restProps } = rest;
  ClerkProvider.displayName = "ReactClerkProvider";
  if (typeof isSpaMode2 !== "undefined" && !isSpaMode2) {
    assertValidClerkState(clerkState);
  }
  const {
    __clerk_ssr_state,
    __publishableKey,
    __proxyUrl,
    __domain,
    __isSatellite,
    __clerk_debug,
    __signInUrl,
    __signUpUrl,
    __afterSignInUrl,
    __afterSignUpUrl,
    __signInForceRedirectUrl,
    __signUpForceRedirectUrl,
    __signInFallbackRedirectUrl,
    __signUpFallbackRedirectUrl,
    __clerkJSUrl,
    __clerkJSVersion,
    __telemetryDisabled,
    __telemetryDebug
  } = (clerkState == null ? void 0 : clerkState.__internal_clerk_state) || {};
  import_react3.default.useEffect(() => {
    if (typeof isSpaMode2 !== "undefined" && !isSpaMode2) {
      warnForSsr(clerkState);
    }
  }, []);
  import_react3.default.useEffect(() => {
    window.__clerk_debug = __clerk_debug;
  }, []);
  const mergedProps = {
    publishableKey: __publishableKey,
    proxyUrl: __proxyUrl,
    domain: __domain,
    isSatellite: __isSatellite,
    signInUrl: __signInUrl,
    signUpUrl: __signUpUrl,
    afterSignInUrl: __afterSignInUrl,
    afterSignUpUrl: __afterSignUpUrl,
    signInForceRedirectUrl: __signInForceRedirectUrl,
    signUpForceRedirectUrl: __signUpForceRedirectUrl,
    signInFallbackRedirectUrl: __signInFallbackRedirectUrl,
    signUpFallbackRedirectUrl: __signUpFallbackRedirectUrl,
    clerkJSUrl: __clerkJSUrl,
    clerkJSVersion: __clerkJSVersion,
    telemetry: {
      disabled: __telemetryDisabled,
      debug: __telemetryDebug
    }
  };
  return import_react3.default.createElement(ClerkReactRouterOptionsProvider, { options: mergedProps }, import_react3.default.createElement(
    ClerkProvider,
    {
      routerPush: (to) => {
        var _a;
        return (_a = awaitableNavigateRef.current) == null ? void 0 : _a.call(awaitableNavigateRef, to);
      },
      routerReplace: (to) => {
        var _a;
        return (_a = awaitableNavigateRef.current) == null ? void 0 : _a.call(awaitableNavigateRef, to, { replace: true });
      },
      initialState: __clerk_ssr_state,
      sdkMetadata: SDK_METADATA,
      ...mergedProps,
      ...restProps
    },
    children
  ));
}
var ClerkProvider2 = ({ children, loaderData, ...opts }) => {
  let clerkState;
  const isSpaMode2 = isSpaMode();
  if (!isSpaMode2 && (loaderData == null ? void 0 : loaderData.clerkState)) {
    clerkState = loaderData.clerkState;
  }
  if (typeof isSpaMode2 !== "undefined" && isSpaMode2) {
    assertPublishableKeyInSpaMode(opts.publishableKey);
  }
  return import_react3.default.createElement(
    ClerkProviderBase,
    {
      ...opts,
      clerkState
    },
    children
  );
};

// node_modules/@clerk/clerk-react/dist/internal.mjs
function useRoutingProps(componentName, props, routingOptions) {
  const path = props.path || (routingOptions == null ? void 0 : routingOptions.path);
  const routing = props.routing || (routingOptions == null ? void 0 : routingOptions.routing) || "path";
  if (routing === "path") {
    if (!path) {
      return errorThrower.throw(noPathProvidedError(componentName));
    }
    return {
      ...routingOptions,
      ...props,
      routing: "path"
    };
  }
  if (props.path) {
    return errorThrower.throw(incompatibleRoutingWithPathProvidedError(componentName));
  }
  return {
    ...routingOptions,
    ...props,
    path: void 0
  };
}

// node_modules/@clerk/react-router/dist/client/uiComponents.js
var import_react4 = __toESM(require_react(), 1);

// node_modules/@clerk/react-router/dist/client/usePathnameWithoutSplatRouteParams.js
var usePathnameWithoutSplatRouteParams = () => {
  const params = useParams();
  const { pathname } = useLocation();
  const splatRouteParam = params["*"] || "";
  const path = pathname.replace(splatRouteParam, "").replace(/\/$/, "").replace(/^\//, "").trim();
  return `/${path}`;
};

// node_modules/@clerk/react-router/dist/client/uiComponents.js
var UserProfile2 = Object.assign(
  (props) => {
    const path = usePathnameWithoutSplatRouteParams();
    return import_react4.default.createElement(UserProfile, { ...useRoutingProps("UserProfile", props, { path }) });
  },
  { ...UserProfile }
);
var OrganizationProfile2 = Object.assign(
  (props) => {
    const path = usePathnameWithoutSplatRouteParams();
    return import_react4.default.createElement(OrganizationProfile, { ...useRoutingProps("OrganizationProfile", props, { path }) });
  },
  { ...OrganizationProfile }
);
var SignIn2 = (props) => {
  const path = usePathnameWithoutSplatRouteParams();
  return import_react4.default.createElement(SignIn, { ...useRoutingProps("SignIn", props, { path }) });
};
var SignUp2 = (props) => {
  const path = usePathnameWithoutSplatRouteParams();
  return import_react4.default.createElement(SignUp, { ...useRoutingProps("SignUp", props, { path }) });
};

// node_modules/@clerk/react-router/dist/index.js
if (typeof window !== "undefined" && typeof window.global === "undefined") {
  window.global = window;
}
setErrorThrowerOptions({ packageName: "@clerk/react-router" });
export {
  APIKeys,
  AuthenticateWithRedirectCallback,
  ClerkDegraded,
  ClerkFailed,
  ClerkLoaded,
  ClerkLoading,
  ClerkProvider2 as ClerkProvider,
  CreateOrganization,
  GoogleOneTap,
  OrganizationList,
  OrganizationProfile2 as OrganizationProfile,
  OrganizationSwitcher,
  PricingTable,
  Protect,
  RedirectToCreateOrganization,
  RedirectToOrganizationProfile,
  RedirectToSignIn,
  RedirectToSignUp,
  RedirectToTasks,
  RedirectToUserProfile,
  SignIn2 as SignIn,
  SignInButton,
  SignInWithMetamaskButton,
  SignOutButton,
  SignUp2 as SignUp,
  SignUpButton,
  SignedIn,
  SignedOut,
  TaskChooseOrganization,
  TaskResetPassword,
  UserAvatar,
  UserButton,
  UserProfile2 as UserProfile,
  Waitlist,
  __experimental_CheckoutProvider,
  PaymentElement as __experimental_PaymentElement,
  PaymentElementProvider as __experimental_PaymentElementProvider,
  useCheckout as __experimental_useCheckout,
  usePaymentElement as __experimental_usePaymentElement,
  useAuth,
  useClerk,
  useEmailLink,
  useOrganization,
  useOrganizationList,
  useReverification,
  useSession,
  useSessionList,
  useSignIn,
  useSignUp,
  useUser
};
//# sourceMappingURL=@clerk_react-router.js.map
